How to build Mpir.NET for Windows
=================================

To make a complete build of Mpir.NET, 3 sub projects must be built in the 
following order:
1) MPIR
2) The modified X-MPIR
3) Mpir.NET

The FAKE (F# make) build script only builds the Mpir.NET part.


Building MPIR
-------------

I've used Visual Studio 2015 to build MPIR, but it can probably be built with 
other versions as well.

1) Download MPIR from http://mpir.org/ and unpack it to a folder.
2) Get vsyasm from Brian Gladman at http://173.254.28.24/~brgladma/vsyasm.zip
  (the official version is at http://www.tortall.net/projects/yasm/, but 
  somehow the download is botched and has been so since 2014).
3) Copy the vsyasm files to the VS2015 folder, e.g. 
   C:\Program Files (x86)\Microsoft Visual Studio 14.0\VC\bin
4) Open <your MPIR folder>\build.vc14\mpir.sln in Visual Studio 2015.
5) Select "Release" solution configuration and build lib_mpir_p3. The resulting
   DLL ends up in <your MPIR folder>\lib\Win32\Release, together with a bunch 
   of header files (it also ends up in <your MPIR folder>\build.vc14, but
   without the header files).
6) Build lib_mpir_k8 from within Visual Studio 2015. The resulting DLL ends up 
   in <your MPIR folder>\lib\x64\Release, together with a bunch of header 
   files.

7) Copy everything in <your MPIR folder>\lib\Win32\Release to 
   Mpir.NET\xmpir_ModdedForMpir.NET\mpir-precompiled\win32.
8) Copy everything in <your MPIR folder>\lib\x64\Release to 
   Mpir.NET\xmpir_ModdedForMpir.NET\mpir-precompiled\win64.


Building the modified X-MPIR
----------------------------

1) Install PHP (a portable version will do).
2) Edit the paths in xmpir_ModdedForMpir.NET\gen-and-build-win.bat to match 
   your system.
3) Open a command prompt in xmpir_ModdedForMpir.NET and run 
   gen-and-build-win.bat. The build result gets copied to the appropriate 
   Mpir.NET folder.


Building Mpir.NET
-----------------

Mpir.NET can be built with Visual Studio 2015, or by running build.cmd. 


Generating docs
---------------

The API reference is generated by Doxygen. Run doxygen and open "Doxyfile" in 
the project root directory. The intro and samples 
(http://wezeku.github.io/Mpir.NET/) are generated and uploaded by "build 
releasedocs", which also uploads the API reference.


Building for Linux
==================

According to their respective authors, MPIR and X-MPIR can be built for Linux. 
That should probably also be true for my modified version of X-MPIR, as I have 
tried not to mess with the Linux specific parts. However, since I have had no 
need to run X-MPIR under Linux, I haven't tried it. If it works, then so should 
the Mpir.NET dll. Unfortunately, I can't provide any instructions for building 
a Linux version, but Linux users have no problems finding out things 
by themselves.
